## Ansible CMDB ? 

##### We all know ansible gathers lot of data from the remote hosts while we run the plays, nothing but facts we call. 

##### These facts has the information about each remote host such as os, hardware, ram, cpu mounts etc. and this data is in JSON format. 

##### Can we use this data to populate a nice html or any human understandable format ? Yes we can

##### We can write a wrapper/script to pull the necessary values from facts generated by ansible & convert them into the format which we want. 
	
```
		OR
```

##### Does ansible provide any solution for this ? 

##### Yes, there is a solution from Ansible, which is ANSIBLE-CMDB

```
So, 
```

##### Ansible-cmdb takes the output of Ansible's fact gathering and converts it into a static HTML overview page (and other things) containing system configuration information.

##### It also supports multiple output formats such as html, csv, sql, etc. and extending information gathered by Ansible with custom data. For each host it also shows the groups, host variables, custom variables and machine-local facts.

## How to install ?

```
Pre Req 

	Ansible-cmdb requires Python v2.7+ / 3.0+.
````

##### In theory, it should work on any system that can run Python, including BSD, Linux, Windows, Solaris and MacOS. In practice, ansible-cmdb is developed on Ubuntu 16.04 and tested on the latest stable versions of Debian, Ubuntu and Centos

##### Ansible-cmdb can be installed using pip, the Python package manager. There are also stand-alone packages for various Linux distributions. Alternatively, we can use brew or plain old make install.

##### Install Ansible-cmdb through Pip:
```
	sudo apt install python-pip
	sudo pip install ansible-cmdb
```

##### Through distribution packages - For Debian / Ubuntu systems:
```
	sudo dpkg -i ansible-cmdb*.deb
```

##### Support for all other package managers (RPM, etc) has been dropped. We need to use the pip method instead, or install from tar.gz.

## Working with Ansible CMDB

##### First, generate Ansible output for your hosts:
```
mkdir out
ansible all -m setup --tree out/
```

##### Next, call ansible-cmdb on the resulting `out/` directory to generate the CMDB overview page
```
ansible-cmdb out/ > overview.html

scp overview.html to you local machine & open the html in you browser to see the results
```
##### By default, the `html_fancy` template is used, which generates output containing an overview of all your hosts, with a section of detailed information for each host.

##### Some templates, such as txt_table and html_fancy, support columns. If a template supports columns, you can use the `--columns / -c` command line option to specify which columns to show.

##### The `--columns` takes a comma separated list of columns (no spaces!) which should be shown. The columns must be specified by their `id` field. For information on what `id` fields are supported by a template, take a look in the template. Usually it's the column title, but in lowercase and with spaces replaced by underscores

##### For example: 
```
ansible-cmdb -t txt_table --columns name,os,ip,mem,cpus facts/

output:

Name                 OS             IP             Mem   CPUs
-------------------  -------------- -------------  ----  ---- 
jib.electricmonk.nl  Linuxmint 17   192.168.0.3    16g   1
app.uat.local        Debian 6.0.10  192.168.57.1   1g    1
eek.electricmonk.nl  Ubuntu 14.04   192.168.0.10   3g    1
db01.prod.local      Debian 6.0.10  192.168.58.1   0g    1
```

## All Available Templates

##### Ansible-cmdb currently provides the following templates out of the box

* `html_fancy:` A dynamic, modern HTML page containing all hosts.
* `html_fancy_split:` A dynamic, modern HTML page with each host's details in a separate file.
* `txt_table:` A quick text table summary of the available hosts with some minimal information.
* `json:` Dumps all hosts including groups, variable, custom info in JSON format.
* `csv:` The CSV template outputs a CSV 􀃗le of your hosts.
* `markdown:` The Markdown template generates host information in the Markdown format.
* `sql:` The SQL template generates an .sql 􀃗le that can be loaded into an SQLite or MySQL database.





